fastlane_version "2.98.0"
default_platform :ios

platform :ios do
  before_all do |lane, options|
	ENV["XCODE_PROJ"] = "./begun.xcodeproj"
	ENV["APP_ID"] = "mobi.robofruit.run-tracking-app"
	ENV["PLIST"] = "./begun/Info.plist"
	ENV["APP_NAME"] = "begun"
  end

	lane :everything do
		setup
		compile
	end

  lane :setup do
	setup_project
  end

  lane :compile do
	build
  end


  private_lane :setup_project do
	create_keychain(
		name: "begun_keychain",
		password: "begun",
		default_keychain: true,
		unlock: true,
		timeout: 3600,
		lock_when_sleeps: false
	)
  end

  private_lane :build do
	match(
		type: "appstore",
		readonly: is_ci,
	  	keychain_name: "begun_keychain",
	  	keychain_password: "begun"
  	)

  end

end
